/*
 * beep.c
 *
 *  Created on: 2022年6月7日
 *      Author: 13363
 */

#include "beep.h"

u8 alarm_tab[200] =
{
    210,210,210,210,210,210,219,219,219,219,
    219,218,218,218,217,217,217,216,216,215,
    215,215,214,214,213,213,212,211,211,210,
    210,209,208,208,207,206,206,205,204,204,
    203,202,201,201,200,199,198,198,197,196,
    195,195,194,193,192,192,191,190,190,189,
    188,187,187,186,185,185,184,183,183,182,
    181,181,180,180,179,179,178,178,177,177,
    176,176,176,175,175,174,174,174,174,173,
    173,173,173,173,172,172,172,172,172,172,
    172,172,172,172,172,172,173,173,173,173,
    173,174,174,174,174,175,175,175,176,176,
    177,177,178,178,179,179,180,180,181,181,
    182,183,183,184,185,185,186,187,187,188,
    189,189,190,191,192,192,193,194,195,195,
    196,197,198,198,199,200,201,201,202,203,
    204,204,205,206,206,207,208,208,209,210,
    210,211,211,212,212,213,214,214,215,215,
    215,216,216,217,217,217,218,218,218,219,
    219,219,219,219,210,210,210,210,210,210
};

void BEEP_UserConfig(void){

    GPIO_InitTypeDef GPIO_InitStructure;

    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOD,ENABLE);//PB3

    GPIO_InitStructure.GPIO_Pin = BEEP;
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_10MHz;
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;//推挽输出
    GPIO_Init(BEEP_PROT,&GPIO_InitStructure);
    GPIO_SetBits(BEEP_PROT,BEEP);//起始状态拉高 蜂鸣器关闭
}

void BEEP_Failed(u8 open){

    if(open)
    {
        GPIO_ResetBits(BEEP_PROT,BEEP);//打开
    }
    else
    {
        GPIO_SetBits(BEEP_PROT,BEEP);//关闭
    }
}

